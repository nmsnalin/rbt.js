!function(t){"use strict";function e(t,e,r,i,n){this.color=t,this.left=e,this.right=n,this.key=r,this.value=i}function r(){}function i(t){var e=h;for(var r in t)t.hasOwnProperty(r)&&(e=e.add(r,t[r]));return e}var n=0,o=1;e.prototype.has=function(t){return t<this.key?this.left.has(t):t>this.key?this.right.has(t):!0},e.prototype.add=function(t,r){return t<this.key?this.$Tree_balance(this.color,this.left.add(t,r),this.key,this.value,this.right):t>this.key?this.$Tree_balance(this.color,this.left,this.key,this.value,this.right.add(t,r)):new e(this.color,this.left,this.key,r,this.right)},e.prototype.$Tree_balance=function(t,r,i,h,u){if(t===o)if(r instanceof e&&r.color===n){if(r.left instanceof e&&r.left.color===n){var s=r.left,f=new e(o,s.left,s.key,s.value,s.right),l=new e(o,r.right,i,h,u);return new e(n,f,r.key,r.value,l)}if(r.right instanceof e&&r.right.color===n){var s=r.right,f=new e(o,r.left,r.key,r.value,s.left),l=new e(o,s.right,i,h,u);return new e(n,f,s.key,s.value,l)}}else if(u instanceof e&&u.color===n){if(u.left instanceof e&&u.left.color===n){var s=u.left,f=new e(o,r,i,h,s.left),l=new e(o,s.right,u.key,u.value,u.right);return new e(n,f,s.key,s.value,l)}if(u.right instanceof e&&u.right.color===n){var s=u.right;return f=new e(o,r,i,h,u.left),l=new e(o,s.left,s.key,s.value,s.right),new e(n,f,u.key,u.value,s.right)}}return new e(t,r,i,h,u)},e.prototype.get=function(t){return t<this.key?this.left.get(t):t>this.key?this.right.get(t):this.value},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.iter=function(t){this.left.iter(t),t(this.key,this.value),this.right.iter(t)},e.prototype.map=function(t){var r=this.left.map(t),i=t(this.key,this.value),n=this.right.map(t);return new e(this.color,r,this.key,i,n)},e.prototype.reduce=function(t,e){return e=this.left.reduce(t,e),e=t(this.key,this.value,e),this.right.reduce(t,e)},e.prototype.toObject=function(){var t={};return this.iter(function(e,r){t[e]=r}),t},r.prototype.has=function(){return!1},r.prototype.add=function(t,r){return new e(n,h,t,r,h)},r.prototype.get=function(){return null},r.prototype.count=function(){return 0},r.prototype.iter=function(){},r.prototype.map=function(){return this},r.prototype.reduce=function(t,e){return e},r.prototype.toObject=function(){return{}};var h=new r,u={empty:h,RBTree:e,fromObject:i};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports?exports=module.exports=u:t.rbtree=u)}(this);